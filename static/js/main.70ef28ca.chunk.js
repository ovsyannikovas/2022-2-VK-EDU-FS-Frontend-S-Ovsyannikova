(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,a){e.exports=a(55)},49:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(29),c=a.n(s),m=(a(49),a(10)),r=a(12),i=a(14),o=a(9),u=a(13),h={"\u0414\u0436\u0435\u043d\u043d\u0438\u0444\u0435\u0440":[{_id:1,author:"\u0414\u0436\u0435\u043d\u043d\u0438\u0444\u0435\u0440",timestamp:"10:40",text:"\u042f \u0442\u0443\u0442 \u043a\u043e\u0435-\u0447\u0442\u043e \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043b\u0430. \u041d\u0430\u043f\u0438\u0448\u0438, \u043a\u0430\u043a \u043e\u0441\u0432\u043e\u0431\u043e\u0434\u0438\u0448\u044c\u0441\u044f."},{_id:2,author:"sveta",timestamp:"10:50",text:"\u0425\u043e\u0440\u043e\u0448\u043e. \u041e\u0441\u0432\u043e\u0431\u043e\u0436\u0443\u0441\u044c \u0433\u0434\u0435-\u0442\u043e \u0447\u0435\u0440\u0435\u0437 \u0447\u0430\u0441."},{_id:3,author:"\u0414\u0436\u0435\u043d\u043d\u0438\u0444\u0435\u0440",timestamp:"10:55",text:"\u0416\u0434\u0443!"}],"\u0421\u0430\u0440\u0430":[{_id:1,author:"\u0421\u0430\u0440\u0430",timestamp:"10:39",text:"\u041f\u0440\u0438\u0432\u0435\u0442. \u041c\u043e\u0436\u0435\u0448\u044c \u043c\u043d\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u043c\u043e\u0447\u044c?"},{_id:2,author:"sveta",timestamp:"10:40",text:"\u0414\u0430, \u043a\u043e\u043d\u0435\u0447\u043d\u043e. \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435?"},{_id:3,author:"\u0421\u0430\u0440\u0430",timestamp:"10:45",text:"\u0420\u0430\u0441\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u044e"}],"\u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442":[{_id:1,author:"\u0421\u0430\u0440\u0430",timestamp:"10:39",text:"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}]},E={"\u0414\u0436\u0435\u043d\u043d\u0438\u0444\u0435\u0440":"jennifer","\u0421\u0430\u0440\u0430":"sarah","\u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442":"common-chat"},p=a(30),d=a.n(p),g=a(22),N=a.n(g),b=a(23),f=a.n(b),v=a(21),y=a.n(v),x=a(11);function S(e){return l.a.createElement("header",{className:"site-header"},l.a.createElement(x.b,{to:"/"},l.a.createElement("button",{className:"logo arrow"},l.a.createElement(d.a,{className:"icon"}))),l.a.createElement("button",null,l.a.createElement("div",{className:"user-info"},l.a.createElement(y.a,{className:"avatar"}),l.a.createElement("div",{className:"user-text"},l.a.createElement("p",{className:"name"},e.props.name),l.a.createElement("p",{className:"time"},"\u0431\u044b\u043b\u0430 2 \u0447\u0430\u0441\u0430 \u043d\u0430\u0437\u0430\u0434")))),l.a.createElement("div",{className:"buttons"},l.a.createElement("button",null,l.a.createElement(N.a,{className:"icon"})),l.a.createElement("button",null,l.a.createElement(f.a,{className:"icon"}))))}var O=a(15),j=a(65);function k(e){var t=e.message,a=e.myName,n="message-bubble";return t.author===a&&(n+=" my-message"),l.a.createElement("div",{className:n},l.a.createElement("div",{className:"message"},l.a.createElement("p",null,t.text),l.a.createElement("div",{className:"info"},l.a.createElement("time",null,t.timestamp),function(e,t){if(e===t)return l.a.createElement(j.a,null)}(t.author,a))))}var C=a(66),_=function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).getMessages=function(){fetch("https://tt-front.vercel.app/messages").then(function(e){return e.json()}).then(function(e){void 0!==e&&a.setState({messages:e})})};var n=JSON.parse(localStorage.getItem("chats"))[a.props.name];return a.state={name:a.props.name,myName:a.props.myName,messages:n,index:n.slice(-1)[0]._id,text:""},a.componentDidMount=a.componentDidMount.bind(Object(O.a)(Object(O.a)(a))),a.handleChange=a.handleChange.bind(Object(O.a)(Object(O.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(O.a)(Object(O.a)(a))),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){"\u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442"===this.state.name&&this.getMessages()}},{key:"handleChange",value:function(e){this.setState({text:e.target.value})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""!==this.state.text){var t=new Date;if(this.setState({text:"",index:this.state.index+1}),"\u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442"===this.state.name)fetch("https://tt-front.vercel.app/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:this.state.myName,text:this.state.text})});else{var a={_id:this.state.index,author:this.state.myName,timestamp:"".concat(t),text:this.state.text};this.saveToLocalStorage(a)}}}},{key:"saveToLocalStorage",value:function(e){this.state.messages.push(e);var t=JSON.parse(localStorage.chats);t[this.state.name]=this.state.messages,localStorage.setItem("chats",JSON.stringify(t))}},{key:"restoreHistory",value:function(e,t){return"\u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442"===this.state.name&&this.componentDidMount(),l.a.createElement(l.a.Fragment,null,e.map(function(e){return l.a.createElement(k,{key:e._id,message:e,myName:t})}))}},{key:"render",value:function(){return l.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"message-list"},this.restoreHistory(this.state.messages,this.state.myName)),l.a.createElement("div",{className:"input-message"},l.a.createElement("input",{className:"form-input",name:"message-text",placeholder:"C\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",onChange:this.handleChange,type:"text",value:this.state.text}),l.a.createElement("button",null,l.a.createElement(C.a,{className:"icon"}))))}}]),t}(l.a.Component);function w(e){return localStorage.getItem("chats")||localStorage.setItem("chats",JSON.stringify(h)),l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{props:e}),l.a.createElement(_,{name:e.name,myName:"sveta"}))}function I(){return l.a.createElement("header",{className:"site-header-messenger"},l.a.createElement("div",{className:"burger-label"},l.a.createElement(x.b,{to:"/profile"},l.a.createElement("button",{className:"burger-icon"},l.a.createElement(f.a,{className:"icon"}))),l.a.createElement("p",{className:"messenger-label"},"Messenger")),l.a.createElement("button",null,l.a.createElement(N.a,{className:"icon"})))}function J(e){var t=e.value,a=e.name;return l.a.createElement("button",{onClick:function(){return e.onClick(a)},className:"dialogue"},l.a.createElement(y.a,{className:"ava"}),l.a.createElement("div",{className:"dialogue-text"},l.a.createElement("div",{className:"dialogue-user-text"},l.a.createElement("p",{className:"dialogue-name"},a),l.a.createElement("p",{className:"dialogue-message"},t.slice(-1)[0].text)),l.a.createElement("div",{className:"dialogue-nums"},l.a.createElement("p",{className:"dialogue-time"},t.slice(-1)[0].timestamp),l.a.createElement(j.a,null))))}var M=a(33),D=a.n(M);function F(e){return l.a.createElement("div",null,l.a.createElement("button",{className:"new-message-btn pulse"},l.a.createElement(D.a,null)),l.a.createElement("div",{className:"message-list messages"},function(e){localStorage.getItem("chats")||localStorage.setItem("chats",JSON.stringify(h));var t=JSON.parse(localStorage.getItem("chats"));return console.log(t),l.a.createElement(l.a.Fragment,null,Object.keys(t).map(function(a){return l.a.createElement(x.b,{to:"chat/".concat(E[a])},l.a.createElement(J,{key:a,name:a,value:t[a],onClick:e.onClick}))}))}(e.props)))}function T(e){return localStorage.getItem("chats")||localStorage.setItem("chats",JSON.stringify(h)),l.a.createElement(l.a.Fragment,null,l.a.createElement(I,null),l.a.createElement(F,{props:e}))}var B=a(1);function H(){return l.a.createElement("header",{className:"site-header-messenger"},l.a.createElement("div",{className:"burger-label"},l.a.createElement(x.b,{to:"/"},l.a.createElement("button",{className:"burger-icon"},l.a.createElement("i",{className:"material-icons icon"},"arrow_back"))),l.a.createElement("p",{className:"messenger-label"},"Edit profile")),l.a.createElement("button",null,l.a.createElement("i",{className:"material-icons icon"},"check")))}function L(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"edit-form"},l.a.createElement("div",{className:"edit-form-photo"},l.a.createElement("div",{className:"edit-form-photo-background"},l.a.createElement("i",{className:"material-icons icon"},"photo_camera")),l.a.createElement("button",null)),l.a.createElement("label",null,l.a.createElement("span",{className:"input-desc"},"Full name"),l.a.createElement("input",{className:"text-input",placeholder:"",type:"text"})),l.a.createElement("label",null,l.a.createElement("span",{className:"input-desc"},"Username"),l.a.createElement("input",{className:"text-input",placeholder:"",type:"text",value:"@"}),l.a.createElement("span",{className:"input-limit"},"Minimum length is 5 characters")),l.a.createElement("label",null,l.a.createElement("span",{className:"input-desc"},"Bio"),l.a.createElement("input",{className:"text-input",placeholder:"",type:"text"}),l.a.createElement("span",{className:"input-limit"},"Any details about you"))))}function A(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(H,null),l.a.createElement(L,null))}var P=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={name:"\u0414\u0436\u0435\u043d\u043d\u0438\u0444\u0435\u0440"},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(x.a,null,l.a.createElement(B.c,null,l.a.createElement(B.a,{path:"/",element:l.a.createElement(T,{onClick:function(t){return e.setState({name:t})}})}),l.a.createElement(B.a,{path:"/chat/:username",element:l.a.createElement(w,{name:this.state.name})}),l.a.createElement(B.a,{path:"/profile",element:l.a.createElement(A,null)})))}}]),t}(n.Component);c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(P,null)))}},[[40,1,2]]]);
//# sourceMappingURL=main.70ef28ca.chunk.js.map